{"version":3,"file":"user-preferences-BUTTkBlW.js","sources":["../../../.svelte-kit/adapter-node/chunks/user-preferences.js"],"sourcesContent":["import { G as sanitize_props, I as spread_props, J as slot } from \"./index2.js\";\nimport { I as Icon } from \"./x.js\";\nimport { d as derived, w as writable } from \"./index.js\";\nfunction Upload($$payload, $$props) {\n  const $$sanitized_props = sanitize_props($$props);\n  /**\n   * @license lucide-svelte v0.542.0 - ISC\n   *\n   * ISC License\n   *\n   * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.\n   *\n   * Permission to use, copy, modify, and/or distribute this software for any\n   * purpose with or without fee is hereby granted, provided that the above\n   * copyright notice and this permission notice appear in all copies.\n   *\n   * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n   * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n   * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n   * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n   * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n   * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n   * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n   *\n   * ---\n   *\n   * The MIT License (MIT) (for portions derived from Feather)\n   *\n   * Copyright (c) 2013-2023 Cole Bemis\n   *\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\n   * of this software and associated documentation files (the \"Software\"), to deal\n   * in the Software without restriction, including without limitation the rights\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n   * copies of the Software, and to permit persons to whom the Software is\n   * furnished to do so, subject to the following conditions:\n   *\n   * The above copyright notice and this permission notice shall be included in all\n   * copies or substantial portions of the Software.\n   *\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n   * SOFTWARE.\n   *\n   */\n  const iconNode = [\n    [\"path\", { \"d\": \"M12 3v12\" }],\n    [\"path\", { \"d\": \"m17 8-5-5-5 5\" }],\n    [\"path\", { \"d\": \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" }]\n  ];\n  Icon($$payload, spread_props([\n    { name: \"upload\" },\n    $$sanitized_props,\n    {\n      /**\n       * @component @name Upload\n       * @description Lucide SVG icon component, renders SVG Element with children.\n       *\n       * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgM3YxMiIgLz4KICA8cGF0aCBkPSJtMTcgOC01LTUtNSA1IiAvPgogIDxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n       * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n       *\n       * @param {Object} props - Lucide icons props and any valid SVG attribute\n       * @returns {FunctionalComponent} Svelte component\n       *\n       */\n      iconNode,\n      children: ($$payload2) => {\n        $$payload2.out.push(`<!---->`);\n        slot($$payload2, $$props, \"default\", {}, null);\n        $$payload2.out.push(`<!---->`);\n      },\n      $$slots: { default: true }\n    }\n  ]));\n}\nfunction getSystemTheme() {\n  return \"light\";\n}\nfunction getInitialTheme() {\n  return \"system\";\n}\nconst theme = writable(getInitialTheme());\nconst effectiveTheme = derived(theme, ($theme) => {\n  if ($theme === \"system\") {\n    return getSystemTheme();\n  }\n  return $theme;\n});\nfunction setTheme(newTheme) {\n  theme.set(newTheme);\n}\nconst API_BASE = \"http://localhost:3008/api\";\nconst DEFAULT_PREFERENCES = {\n  userId: \"default\",\n  currency: \"EUR\",\n  language: \"en\",\n  theme: \"light\"\n};\nfunction createUserPreferencesStore() {\n  const { subscribe, set, update } = writable(DEFAULT_PREFERENCES);\n  return {\n    subscribe,\n    // Load preferences from database or localStorage fallback\n    async load() {\n      return;\n    },\n    // Save preferences to both database and localStorage\n    async save(preferences) {\n      try {\n        const response = await fetch(`${API_BASE}/preferences/default`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(preferences)\n        });\n        if (response.ok) {\n          const updatedPreferences = await response.json();\n          set(updatedPreferences);\n          localStorage.setItem(\n            \"userPreferences\",\n            JSON.stringify(updatedPreferences)\n          );\n        } else {\n          throw new Error(\"Failed to save to database\");\n        }\n      } catch (error) {\n        console.warn(\n          \"Failed to save preferences to database, updating localStorage only\"\n        );\n        update((current) => {\n          const updated = { ...current, ...preferences };\n          localStorage.setItem(\"userPreferences\", JSON.stringify(updated));\n          return updated;\n        });\n      }\n    },\n    // Update specific preference\n    async updateCurrency(currency2) {\n      await this.save({ currency: currency2 });\n    },\n    async updateLanguage(language2) {\n      await this.save({ language: language2 });\n    },\n    async updateTheme(theme2) {\n      await this.save({ theme: theme2 });\n    }\n  };\n}\nconst userPreferences = createUserPreferencesStore();\nderived(userPreferences, ($prefs) => $prefs.currency);\nderived(userPreferences, ($prefs) => $prefs.language);\nderived(userPreferences, ($prefs) => $prefs.theme);\nexport {\n  Upload as U,\n  effectiveTheme as e,\n  setTheme as s,\n  theme as t,\n  userPreferences as u\n};\n"],"names":[],"mappings":"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"}