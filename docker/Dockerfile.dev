# ðŸš€ Universal Development Dockerfile
# Simplified for both backend and frontend development

FROM node:20-alpine

# Install pnpm
RUN corepack enable && corepack prepare pnpm@latest --activate

# Install basic tools
RUN apk add --no-cache bash git

# Create app directory
WORKDIR /app

# Copy package files
COPY package.json pnpm-lock.yaml ./
COPY backend/package.json ./backend/

# Install dependencies
RUN pnpm install --frozen-lockfile

# Copy application code
COPY . .

# Default to development mode
ENV NODE_ENV=development

# Expose common ports
EXPOSE 3000 3001 5173 5174

# Default command (can be overridden)
CMD ["pnpm", "dev"]